{% extends 'base.twig' %}

{% block head %}
    <script
    type="text/javascript"
    src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
    </script>
    <script type="text/javascript">
    (function () {
        emailjs.init({
        publicKey: "{{emailjskey}}",
        });
    })();
    </script>
  <script>
      // Pasar el correo del usuario desde Twig al JavaScript
      const userEmail = "{{ userMail|e('js') }}"; 
  </script>
  <script src="/assets/js/index.js" defer></script>

    
{%endblock%}

{% block content %}

  <main class="index-container" itemscope itemtype="http://schema.org/Person">
    <section>
      <h2>Datos del usuario</h2>
      <dl>
        <dt>Usuario</dt>
        <dd>{{ user.email }}</dd>
        <dt>Rol</dt>
        <dd class="capitalize">{{ user.rol.nombre }}</dd>


      </dl>
    </section>
    <form class="index-form" method="post" itemprop="potentialAction" itemscope itemtype="http://schema.org/Action">
        <h2>Cambiar contraseña</h2>
        <label for="actual-password">Contraseña actual:</label>
        <input type="password" id="actual-password" class="actual-password" name="actual-password" required>

        <label for="new-password">Contraseña nueva:</label>
        <input type="password" id="new-password" class="new-password" name="new-password" required>

        <label for="repeat-password">Repita la contraseña:</label>
        <input type="password" id="repeat-password" class="repeat-password" name="repeat-password" required>

        <output id="message" class="hidden" itemprop="description"></output>          
        <button type="button" class="change-password-button" itemprop="target">Cambiar contraseña</button>
    </form>
  </main>

{% endblock %}